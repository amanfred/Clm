@model Clm.Models.VIewModel.UnitsAttributesViewModel
@using Clm.Extensions
@using NewAgeClm.Utility;

@{
	ViewData["Title"] = @Model.Unit.Name;
}

<br />
<h2 class="text-info">
	@Model.Unit.Name
</h2>


<!--for file upload use enctype="multipart/form-data"-->
<div class="p-4 border rounded">
	<div class="form-group row">
		<div class="col-2">
			<label asp-for="Unit.Name"></label>
		</div>
		<div class="col-5">
			<input asp-for="Unit.Name" class="form-control" disabled readonly />
		</div>
	</div>
	@*<div class="form-group row">
			<div class="col-2">
				<label asp-for="Projects.Key"></label>
			</div>
			<div class="col-5">
				<input asp-for="Projects.Key" class="form-control" />
			</div>
			<span asp-validation-for="Projects.Key" class="text-danger"></span>
		</div>*@
	@*<div class="form-group row">
			<div class="col-2">
				<label asp-for="Projects.ProjectLead"></label>
			</div>
			<div class="col-5">
				<input asp-for="Projects.ProjectLead" class="form-control" />
			</div>
			<span asp-validation-for="Projects.ProjectLead" class="text-danger"></span>
		</div>*@
	@*<div class="form-group row">
			<div class="col-2">
				<label asp-for="Projects.Reporter"></label>
			</div>
			<div class="col-5">
				<input asp-for="Projects.Reporter" class="form-control" />
			</div>
			<span asp-validation-for="Projects.Reporter" class="text-danger"></span>
		</div>*@
	<div class="form-group row">
		<div class="col-2">
			<label asp-for="Types"></label>
		</div>
		<div class="col-5">
			<input asp-for="@Model.Unit.Types.Name" class="form-control" disabled readonly />
		</div>
	</div>
	<div class="form-group row">
		<div class="col-2">
			<label asp-for="Statuses"></label>
		</div>
		<div class="col-5">
			<input asp-for="@Model.Unit.Statuses.Name" class="form-control" disabled readonly />
		</div>
	</div>
	@*<div class="form-group row">
			<div class="col-2">
				<label asp-for="Projects.Priorities"></label>
			</div>
			<div class="col-5">
				<select asp-for="@Model.Projects.PriorityId" asp-items="Model.Priorities.ToSelectListItem(Model.Projects.PriorityId)" class="form-control"></select>
			</div>
		</div>*@
	@*<div class="form-group row">
			<div class="col-2">
				<label asp-for="Projects.Labels"></label>
			</div>
			<div class="col-5">
				<select asp-for="@Model.Projects.LabelId" asp-items="Model.Labels.ToSelectListItem(Model.Projects.LabelId)" class="form-control"></select>
			</div>
		</div>*@
	@*<div class="form-group row">
			<div class="col-2">
				<label asp-for="Projects.Categories"></label>
			</div>
			<div class="col-5">
				<select asp-for="@Model.Projects.CategoryId" asp-items="Model.Categories.ToSelectListItem(Model.Projects.CategoryId)" class="form-control"></select>
			</div>
		</div>*@

	<div class="form-group row">
		<div class="col-2">
			<label asp-for="Unit.Description"></label>
		</div>
		<div class="col-5">
			<textarea asp-for="Unit.Description" class="form-control" disabled readonly></textarea>
		</div>
	</div>


	<br />
	<!--add two buttons-->
	<div class="form-group">
		@*<input type="submit" class="btn btn-primary" value="Add" />*@
		@*<a asp-action="Index" asp-area="PowerUser" class="btn btn-success">Back to List</a>*@
		@*<button class="btn btn-primary">Add to project</button>*@
		@if (Model.Unit.Types.Name != StaticData.DefaultDbValueTypeSubTask &&
		Model.Unit.Types.Name != StaticData.DefaultDbValueTypeTask)
		{
			<a asp-controller="Project" asp-area="RegularUser" asp-action="Create" asp-route-id="@Model.Unit.Id"
			   data-toggle="tooltip" data-placement="top" title="Add new feature" class="btn btn-info">
				<i class=" fas fa-plus-square"></i>
			</a>
		}
		@if (Model.Unit.Types.Name != StaticData.DefaultDbValueTypeGlobalProject &&
		   Model.Unit.Types.Name != StaticData.DefaultDbValueTypeLocalProject)
		{
			<a asp-controller="Project" asp-area="RegularUser" asp-action="Edit" asp-route-id="@Model.Unit.Id"
			   data-toggle="tooltip" data-placement="top" title="Edit" class="btn btn-primary">
				<i class="fas fa-edit"></i>
			</a>
		}

	</div>	
	<hr />
	<div>
		<table class="table table-striped border">
			<tr class="table-info">
				<th>
					<a asp-action="Index" asp-route-sortOrder="@ViewData["NameSortParm"]">
						@Html.DisplayNameFor(m => m.Unit.Name)<!--Html helper-->
						</a>
				</th>
				<th>
					@Html.DisplayNameFor(m => m.Unit.Statuses)
				</th>				
				<th>
					@Html.DisplayNameFor(m => m.Unit.Types)
				</th>
			</tr>			
			@foreach (var unit in Model.Units)
			{				
			<tr>
				<td>
					<a asp-controller="Project" asp-area="RegularUser" asp-action="Index" asp-route-id="@unit.Id">
						@Html.DisplayFor(m => unit.Name)<!--Html helper-->
					</a>
					
				</td>
				<td>
					@Html.DisplayFor(m => unit.Statuses.Name)
				</td>
				<td>
					@Html.DisplayFor(m => unit.Types.Name)
				</td>
				@*<td>*@
					@*<partial name="_TableButtonsWithControllerPartial" model="controller" />*@
			</tr>
			}
		</table>
	</div>
	
</div>




